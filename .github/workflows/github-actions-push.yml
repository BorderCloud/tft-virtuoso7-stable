name: Build docker
on: push
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository code
        uses: actions/checkout@v2
      - name: Build image docker
        env:
          SOME_ENV_VAR_NAME: testEnv
      - run: >-
            echo ${SOME_ENV_VAR_NAME}
      - run: >-
            docker build -t tft-virtuoso7-stable .
      - run: >-
            sudo docker-compose up -d
      - run: >-
            sleep 30s
      - run: >-
            git clone --recursive https://github.com/BorderCloud/TFT.git
      - run: >-
            cd TFT
      - run: >-
            composer install
      - run: >-
             wget http://mirrors.standaloneinstaller.com/apache//jmeter/binaries/apache-jmeter-5.4.1.tgz
      - run: >-
            tar xvzf apache-jmeter-5.4.1.tgz
      - run: >-
            mv  apache-jmeter-5.4.1 jmeter
      - run: >-
            rm apache-jmeter-5.4.1.tgz
      - run: >-
            php -version
            
